<!DOCTYPE html>
<html lang="tr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Archistyle | Mimari Vizyon Analizi</title>

    <link
      href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;800&family=Playfair+Display:wght@700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />

    <style>
      :root {
        --dark-bg: #0a0b0c;
        --accent-green: #4ade80;
        --text-muted: #94a3b8;
      }

      body {
        font-family: "Plus Jakarta Sans", sans-serif;
        background-color: var(--dark-bg);
        color: #ffffff;
        scroll-behavior: smooth;
      }

      #video-background {
        position: fixed;
        right: 0;
        bottom: 0;
        min-width: 100%;
        min-height: 100%;
        z-index: -100;
        object-fit: cover;
        filter: brightness(0.2) contrast(1.1);
      }

      .navbar {
        background-color: #0a0b0c !important;
        backdrop-filter: blur(10px);
        padding: 10px 0;
        border-bottom: 1px solid rgba(255, 255, 255, 0.03);
      }

      .navbar-brand {
        display: flex;
        align-items: center;
        font-family: "Playfair Display", serif;
        font-size: 1.8rem;
        font-weight: 700;
      }

      .logo-box {
        height: 70px;
        width: 70px;
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: #0a0b0c;
        margin-right: 20px;
      }

      .navbar-brand img {
        height: 100%;
        width: 100%;
        object-fit: contain;
        mix-blend-mode: screen;
        filter: contrast(1.2) brightness(1.1);
      }

      .about-section {
        padding: 120px 0;
        background: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.8));
      }

      .feature-card {
        background: rgba(255, 255, 255, 0.03);
        border: 1px solid rgba(255, 255, 255, 0.05);
        padding: 30px;
        border-radius: 20px;
        transition: 0.3s;
        height: 100%;
      }

      .feature-card:hover {
        background: rgba(74, 222, 128, 0.05);
        border-color: var(--accent-green);
        transform: translateY(-10px);
      }

      .feature-icon {
        font-size: 2.5rem;
        color: var(--accent-green);
        margin-bottom: 20px;
      }

      .hero-section {
        margin-top: 160px;
        margin-bottom: 100px;
      }

      .upload-container {
        background: rgba(255, 255, 255, 0.02);
        backdrop-filter: blur(25px);
        border: 1px solid rgba(255, 255, 255, 0.08);
        border-radius: 28px;
        padding: 40px;
        max-width: 800px;
        margin: 0 auto;
      }

      /* SONUÇ */
      #resultSection {
        background: rgba(255, 255, 255, 0.04);
        border: 1px solid rgba(255, 255, 255, 0.08);
        border-radius: 20px;
        padding: 30px;
        margin-top: 40px;
        display: none;
      }
    </style>
  </head>

  <body>
    <video autoplay muted loop playsinline id="video-background">
      <source src="video/855955-hd_1920_1080_30fps.mp4" type="video/mp4" />
    </video>

    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
      <div class="container">
        <a class="navbar-brand" href="#">
          <div class="logo-box">
            <img src="images/Ekran görüntüsü 2025-12-18 154124.png" alt="Logo" />
          </div>
          Archistyle
        </a>

        <div class="ml-auto">
          <a href="#analiz" class="nav-link d-inline-block text-white-50">Analiz</a>
          <a href="#hakkimizda" class="nav-link d-inline-block text-white-50 ml-4">
            Hakkımızda
          </a>
        </div>
      </div>
    </nav>

    <div class="container hero-section text-center" id="analiz">
      <h1 class="font-weight-bold mb-3">
        Mimarinin Kodlarını <br />
        <span style="color: var(--accent-green)">Yapay Zeka</span> İle Çöz
      </h1>
      <p class="text-muted mb-5">
        Bir fotoğraf yükleyin, yapının stilistik kimliğini saniyeler içinde saptayalım.
      </p>

      <div class="upload-container">
        <input type="file" id="fileInput" accept="image/*" class="d-none" />

        <div
          id="inputArea"
          onclick="document.getElementById('fileInput').click()"
          style="border: 2px dashed rgba(255, 255, 255, 0.1); border-radius: 20px; padding: 50px; cursor: pointer;"
        >
          <img id="imagePreview" class="d-none w-100 rounded mb-4" style="max-height: 350px; object-fit: contain" />
          <div id="placeholder">
            <i class="fas fa-plus mb-3" style="font-size: 1.5rem; color: var(--accent-green)"></i>
            <p class="text-white-50">Görsel seçmek için buraya tıklayın</p>
          </div>
        </div>

        <button
          class="btn btn-primary w-100 mt-4"
          style="background: #fff; color: #000; font-weight: 800; border-radius: 12px; padding: 15px;"
          id="analyzeButton"
        >
          STİLİ ANALİZ ET
        </button>
      </div>

      <!-- SONUÇ ALANI -->
      <div id="resultSection">
        <h3 class="font-weight-bold mb-3">Analiz Sonucu</h3>
        <p><strong>Stil:</strong> <span id="resultStyle"></span></p>
        <p><strong>Tahmin Güveni:</strong> <span id="resultConfidence"></span></p>
        <p><strong>Açıklama:</strong> <span id="resultDescription"></span></p>
        <p><strong>Öncü:</strong> <span id="resultPioneer"></span></p>
      </div>
    </div>

    <!-- HAKKIMIZDA -->
    <section class="about-section" id="hakkimizda">
      <div class="container">
        <div class="text-center mb-5">
          <h2 class="font-weight-bold display-4">Archistyle Nedir?</h2>
          <p class="text-muted">Geleneksel mimari bilgiyi modern teknolojiyle birleştiriyoruz.</p>
        </div>

        <div class="row">
          <div class="col-md-4 mb-4">
            <div class="feature-card text-center">
              <i class="fas fa-brain feature-icon"></i>
              <h4>Derin Öğrenme</h4>
              <p class="text-muted small">Binlerce mimari eserle eğitilmiş yapay zeka modelimiz…</p>
            </div>
          </div>
          
          <div class="col-md-4 mb-4">
            <div class="feature-card text-center">
              <i class="fas fa-archway feature-icon"></i>
              <h4>Stil Sınıflandırma</h4>
              <p class="text-muted small">Geniş mimari stil yelpazesi…</p>
            </div>
          </div>

          <div class="col-md-4 mb-4">
            <div class="feature-card text-center">
              <i class="fas fa-lightbulb feature-icon"></i>
              <h4>Vizyoner Analiz</h4>
              <p class="text-muted small">Açıklama ve tarihsel bağlam analizi…</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <footer class="text-center py-5 border-top border-dark">
      <p class="text-muted small">©️ 2025 Archistyle AI Projesi. Tüm Hakları Saklıdır.</p>
    </footer>

    <!-- GÖRSEL ÖNİZLEME -->
    <script>
      const fileInput = document.getElementById("fileInput");
      const imagePreview = document.getElementById("imagePreview");
      const placeholder = document.getElementById("placeholder");

      fileInput.onchange = (e) => {
        const file = e.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = (ev) => {
            imagePreview.src = ev.target.result;
            imagePreview.classList.remove("d-none");
            placeholder.classList.add("d-none");
          };
          reader.readAsDataURL(file);
        }
      };
    </script>

    <!-- ANALİZ BUTONU -->
    <script>
      document.getElementById("analyzeButton").addEventListener("click", async () => {
        const fileInput = document.getElementById("fileInput");
        const file = fileInput.files[0];

        if (!file) {
          alert("Lütfen bir resim seçin!");
          return;
        }

        const formData = new FormData();
        formData.append("file", file);

        try {
          const response = await fetch("http://127.0.0.1:8000/predict", {
            method: "POST",
            body: formData
          });

          const data = await response.json();
          console.log("API Response:", data);

          // SONUÇLARI YERLEŞTİR
          document.getElementById("resultStyle").textContent = data.predicted_class;
          document.getElementById("resultConfidence").textContent =
            "%" + (data.confidence * 100).toFixed(2);
          document.getElementById("resultDescription").textContent = data.description;
          document.getElementById("resultPioneer").textContent = data.pioneer;

          // KARTI GÖSTER
          document.getElementById("resultSection").style.display = "block";

          // AŞAĞI KAY
          document.getElementById("resultSection").scrollIntoView({
            behavior: "smooth"
          });

        } catch (error) {
          console.error("Hata:", error);
          alert("Bir hata oluştu!");
        }
      });
    </script>
  </body>
</html>